---
phase: 01-authentication-access
plan: 05
type: execute
wave: 5
depends_on: ["04"]
files_modified: []
autonomous: false
user_setup:
  - service: workos
    why: "AuthKit email verification and password reset"
    dashboard_config:
      - task: "Enable AuthKit Email+Password and default verification/reset emails"
        location: "WorkOS Dashboard → Authentication → AuthKit"

must_haves:
  truths:
    - "User receives email verification after signup"
    - "User can reset password via email link"
  artifacts:
    - path: "apps/web/app/page.tsx"
      provides: "Auth entry page with WorkOS links"
    - path: "apps/web/app/auth/callback/route.ts"
      provides: "AuthKit callback handler"
  key_links:
    - from: "apps/web/app/page.tsx"
      to: "getSignInUrl/getSignUpUrl"
      via: "WorkOS hosted auth links"
      pattern: "getSign(In|Up)Url"
    - from: "apps/web/app/auth/callback/route.ts"
      to: "@workos-inc/authkit-nextjs"
      via: "handleAuth()"
      pattern: "handleAuth"
---

<objective>
Verify WorkOS email verification and password reset flows.

Purpose: Ensure AUTH-02 and AUTH-03 are satisfied via WorkOS AuthKit defaults.
Output: Human-verified email flows for signup verification and password reset.
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-authentication-access/01-RESEARCH.md
</context>

<tasks>

<task type="checkpoint:human-action" gate="blocking">
  <action>Enable AuthKit verification and reset emails in WorkOS</action>
  <instructions>
    1. Open WorkOS Dashboard → Authentication → AuthKit.
    2. Confirm Email+Password is enabled.
    3. Ensure default email verification and password reset emails are enabled.
  </instructions>
  <resume-signal>Type "done" when complete</resume-signal>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>WorkOS AuthKit email verification + password reset flows</what-built>
  <how-to-verify>
    1. Start the dev server in apps/web.
    2. Visit the home page and click Sign up to open the WorkOS AuthKit hosted flow.
    3. Create a new account and confirm a verification email is received and the link verifies the account.
    4. Use the "Forgot password" flow to request a reset email and confirm the link allows setting a new password.
  </how-to-verify>
  <resume-signal>Type "approved" or describe issues</resume-signal>
</task>

</tasks>

<verification>
- Email verification and password reset flows pass end-to-end
</verification>

<success_criteria>
- Verification emails are delivered and confirm accounts
- Password reset emails deliver a working reset flow
</success_criteria>

<output>
After completion, create `.planning/phases/01-authentication-access/01-05-SUMMARY.md`
</output>

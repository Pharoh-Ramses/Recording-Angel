---
phase: 01-authentication-access
plan: 06
type: execute
wave: 5
depends_on: ["04"]
files_modified:
  - package.json
  - turbo.json
  - apps/web/package.json
  - pnpm-workspace.yaml
autonomous: true
gap_closure: false

must_haves:
  truths:
    - "Root package.json includes turbo as a dev dependency"
    - "turbo.json configures pipeline for build, dev, lint, and type-check tasks"
    - "Workspace scripts use turbo run for caching and parallelization"
    - "All apps build successfully with turbo run build"
  artifacts:
    - path: "turbo.json"
      provides: "Turbo pipeline configuration"
    - path: "package.json"
      provides: "Turbo dependency and updated scripts"
  key_links:
    - from: "package.json"
      to: "apps/web"
      via: "turbo run dev --filter=web"
      pattern: "turbo"
---

<objective>
Retrofit Turbo Repo onto the existing pnpm workspace for better task orchestration and caching.

Purpose: Add Turbo's pipeline and caching to the monorepo without disrupting existing auth implementation.
Output: turbo.json, updated root package.json with Turbo scripts, verified builds.
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install Turbo and update root package.json</name>
  <files>package.json</files>
  <action>
    - Install turbo as a dev dependency at the root: pnpm add -D turbo
    - Update root scripts to use turbo run instead of pnpm -C:
      - "dev": "turbo run dev --filter=web"
      - "build": "turbo run build"
      - "lint": "turbo run lint"
      - "type-check": "turbo run type-check"
    - Keep the workspace simple with one app initially.
  </action>
  <verify>pnpm install</verify>
  <done>Turbo installed and root scripts updated to use turbo run.</done>
</task>

<task type="auto">
  <name>Task 2: Create turbo.json pipeline configuration</name>
  <files>turbo.json</files>
  <action>
    - Create turbo.json with pipeline configuration:
      - build: dependsOn ["^build"], outputs [".next/**", "!.next/cache/**"]
      - dev: cache false, persistent true
      - lint: outputs []
      - type-check: outputs []
    - Configure globalDependencies for env files if needed.
  </action>
  <verify>cat turbo.json</verify>
  <done>turbo.json exists with proper pipeline for build, dev, lint, and type-check.</done>
</task>

<task type="auto">
  <name>Task 3: Add Turbo pipeline scripts to apps/web package.json</name>
  <files>apps/web/package.json</files>
  <action>
    - Ensure apps/web/package.json has the standard scripts Turbo expects:
      - "build": "next build"
      - "dev": "next dev"
      - "lint": "next lint"
      - "type-check": "tsc --noEmit"
    - These should already exist from Next.js scaffold, but verify they're present.
  </action>
  <verify>cat apps/web/package.json</verify>
  <done>apps/web has build, dev, lint, and type-check scripts for Turbo pipeline.</done>
</task>

<task type="auto">
  <name>Task 4: Verify Turbo pipeline works</name>
  <files></files>
  <action>
    - Run turbo run build to verify the pipeline executes successfully
    - Check that caching works by running build a second time (should be faster)
    - Verify dev server can start with turbo run dev
  </action>
  <verify>turbo run build</verify>
  <done>Turbo pipeline executes successfully with proper task orchestration.</done>
</task>

</tasks>

<verification>
- pnpm install completes successfully
- turbo run build completes successfully
- turbo.json has proper pipeline configuration
</verification>

<success_criteria>
- Turbo Repo is installed and configured
- Root scripts use turbo run for task orchestration
- All builds succeed with caching enabled
- Dev server works via turbo run dev
</success_criteria>

<output>
After completion, create `.planning/phases/01-authentication-access/01-06-SUMMARY.md`
</output>
